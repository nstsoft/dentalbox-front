import React, { Component } from 'react';
import * as actions from '../../../store/actions/index';
import { connect } from 'react-redux';
import * as R from 'ramda';


class CuttedZone extends Component {

    constructor ( props ) {

        super ( props );
        this.index = this.props.t;
        this.colorSet = [ 'none', 'rgb(102, 89, 89)', 'rgb(176, 71, 71)', 'rgb(51, 87, 163)', 'rgb(57, 145, 40)' ];

    };

    changeColor = ( event ) => {
        const { isToothToggleable } = this.props;
        if (!isToothToggleable) return;

        let segment = event.target;
        let code = segment.attributes.seg.value;

        let indexOf = this.colorSet.indexOf ( segment.style.fill ) + 1;

        if ( indexOf === 5 ) {
            indexOf = 0;
        }

        let newColor = this.colorSet[ indexOf ];

        this.props.setZoneValues ( { ['' + code]: newColor }, this.index, code );

    };

    render () {

        if(! R.isEmpty( this.props.tooth ) ){
            if( this.props.tooth[this.index].implant ||  this.props.tooth[this.index].removed ||   this.props.tooth[this.index].crown ){
                return null
            }

        }


        let style_1 = {
            fill:             R.pathOr ( 'none', [ 'tooth', this.index, 'zone', '1' ], this.props ),
            stroke:           '#000000',
            strokeWidth:      4.19999981,
            strokeLinecap:    'butt',
            strokeLinejoin:   'miter',
            strokeMiterlimit: 4,
            strokeDasharray:  'none',
            strokeOpacity:    1,
        };


        let style_2 = {
            fill:             R.pathOr ( 'none', [ 'tooth', this.index, 'zone', '2' ], this.props ),
            stroke:           '#000000',
            strokeWidth:      4.19999981,
            strokeLinecap:    'butt',
            strokeLinejoin:   'miter',
            strokeMiterlimit: 4,
            strokeDasharray:  'none',
            strokeOpacity:    1,
        };


        let style_3 = {
            fill:             R.pathOr ( 'none', [ 'tooth', this.index, 'zone', '3' ], this.props ),
            stroke:           '#000000',
            strokeWidth:      4.19999981,
            strokeLinecap:    'butt',
            strokeLinejoin:   'miter',
            strokeMiterlimit: 4,
            strokeDasharray:  'none',
            strokeOpacity:    1,
        };


        let style_4 = {
            fill:             R.pathOr ( 'none', [ 'tooth', this.index, 'zone', '4' ], this.props ),
            stroke:           '#000000',
            strokeWidth:      4.19999981,
            strokeLinecap:    'butt',
            strokeLinejoin:   'miter',
            strokeMiterlimit: 4,
            strokeDasharray:  'none',
            strokeOpacity:    1,
        };


        return (

            <svg
                viewBox="0 0 209.20982 209.20982"
                version="1.1"
            >
                <g
                    transform="translate(0.09449093,-0.95014852)">
                    <path
                        seg={'1'}
                        onClick={this.changeColor}
                        style={style_1}
                        d="m 104.62854,104.84635 c -2.35315,-1.4678 -4.03905,-3.76844 -5.716893,-5.976745 -18.134273,-23.867648 -41.728639,-42.892206 -63.4927,-63.503904 -0.114382,-0.108325 -0.228861,-0.216847 -0.334086,-0.334087 -0.08436,-0.094 -0.163931,-0.194643 -0.267269,-0.267269 -0.122409,-0.08603 -0.270406,-0.127273 -0.400905,-0.200453 -0.08731,-0.04896 -0.169264,-0.113237 -0.267269,-0.133636 -0.07657,-0.01594 -0.15573,-0.0034 -0.233862,0 -0.10016,0.0044 -0.20062,-0.0063 -0.300678,0 -0.127546,0.008 -0.252808,0.04384 -0.367496,0.100227 -0.214555,0.105481 -0.386865,0.278204 -0.567946,0.434313 -0.06588,0.05679 -0.133361,0.111692 -0.200454,0.167045 -0.213376,0.176038 -0.422875,0.356714 -0.634765,0.534538 -0.133248,0.111825 -0.267439,0.222521 -0.400904,0.334086 -5.08594,4.251413 -9.041505,9.702923 -12.428033,15.401407 C 10.727863,65.347047 5.5638213,81.165313 4.2522351,97.334077 2.8427527,114.70967 5.9048769,132.41329 12.945687,148.36086 c 4.421107,10.01389 10.462129,19.4281 18.520832,26.83631 0.402538,0.37004 0.813063,0.73845 1.133931,1.18118 0.03972,0.0548 0.07811,0.1108 0.123393,0.1611 0.04528,0.0503 0.09814,0.0951 0.160089,0.12238 0.103369,0.0455 0.224357,0.0379 0.330729,0 0.106555,-0.038 0.201019,-0.10445 0.284888,-0.18038 0.08387,-0.0759 0.15818,-0.16163 0.234828,-0.24484 0.279383,-0.30329 0.591139,-0.57465 0.897694,-0.85045 1.895541,-1.70538 3.610619,-3.5989 5.363866,-5.45025 5.046747,-5.32915 10.429255,-10.32796 15.635269,-15.50164 7.373315,-7.32751 14.394705,-15.00793 21.916099,-22.18337 8.714668,-8.31382 18.133557,-15.98583 25.657875,-25.3906 0.4011,-0.50134 0.81107,-1.01999 1.36976,-1.33635 0.0598,-0.0338 0.12124,-0.0654 0.17575,-0.10714 0.0545,-0.0418 0.10245,-0.0952 0.12492,-0.16013 0.0186,-0.0536 0.0186,-0.11345 0,-0.16704 -0.0193,-0.0557 -0.0577,-0.10331 -0.10205,-0.14218 -0.0444,-0.0389 -0.095,-0.0699 -0.14502,-0.10111 z"
                    />
                    <path
                        seg={'2'}
                        onClick={this.changeColor}
                        style={style_2}
                        d="m 105.08919,104.86998 c 0.3002,-0.25421 0.59557,-0.51414 0.88589,-0.77958 0.66998,-0.61257 1.31269,-1.25416 1.96075,-1.88988 1.10124,-1.08026 2.21847,-2.14407 3.33091,-3.212797 11.29148,-10.847735 22.08686,-22.199082 33.21466,-33.214656 2.90266,-2.873385 5.82802,-5.724002 8.70318,-8.624901 3.70305,-3.736195 7.3227,-7.55566 11.09169,-11.22532 2.82141,-2.747053 5.72735,-5.411026 8.41899,-8.285353 0.58197,-0.621465 1.15769,-1.256213 1.83525,-1.771793 0.33002,-0.251127 0.68798,-0.477701 0.94494,-0.803198 0.0977,-0.12377 0.18159,-0.267706 0.18899,-0.425223 0.005,-0.115228 -0.031,-0.229328 -0.0854,-0.331027 -0.0544,-0.101699 -0.12653,-0.192694 -0.19807,-0.283185 -0.26327,-0.332999 -0.52705,-0.669954 -0.85044,-0.94494 -0.41638,-0.354058 -0.91653,-0.592838 -1.37017,-0.897695 -1.22327,-0.822063 -2.06266,-2.087431 -3.07096,-3.162382 -1.50302,-1.602379 -3.38745,-2.784867 -5.21176,-4.009043 -4.67461,-3.136832 -9.0956,-6.662768 -13.96483,-9.488068 C 144.04155,11.533997 136.4038,9.0198309 128.6626,7.2355832 112.05612,3.407999 94.466427,2.8823275 78.081845,7.5696702 70.139573,9.8418153 62.585252,13.296485 55.230301,17.057738 c -7.379974,3.774049 -14.816372,8.059775 -19.777945,14.699824 -0.265319,0.355074 -0.526701,0.720199 -0.868627,1.00226 -0.158689,0.130905 -0.334728,0.243961 -0.46772,0.400905 -0.09256,0.109227 -0.162158,0.238419 -0.198279,0.376956 -0.03612,0.138537 -0.03832,0.286324 -0.0022,0.424853 0.04873,0.186731 0.164271,0.349967 0.298933,0.488201 0.134663,0.138235 0.289356,0.255038 0.436058,0.380423 0.311438,0.266183 0.586941,0.571139 0.868627,0.868628 0.769013,0.812155 1.589399,1.573703 2.405425,2.338607 10.614799,9.94981 20.585387,20.560273 30.772576,30.94747 3.306245,3.371157 6.63603,6.719511 10.016368,10.016369 4.433671,4.324177 8.953516,8.558995 13.418156,12.85119 2.186476,2.102024 4.367247,4.226137 6.236607,6.614583 0.497348,0.635452 0.972638,1.289594 1.511903,1.889883 0.469191,0.52229 0.984531,1.0012 1.511911,1.46466 0.38528,0.33859 0.7781,0.67 1.13392,1.03943 0.31085,0.32275 0.59216,0.67326 0.85045,1.03943 0.13581,0.19253 0.26763,0.39206 0.44675,0.54511 0.0784,0.067 0.16474,0.12404 0.24615,0.18736 0.0814,0.0633 0.15895,0.1342 0.21322,0.2219 0.0336,0.0542 0.0579,0.11433 0.0969,0.16477 0.0195,0.0252 0.0428,0.0479 0.0704,0.0638 0.0276,0.0159 0.0598,0.0248 0.0916,0.022 0.0232,-0.002 0.0455,-0.0103 0.0662,-0.0212 0.0207,-0.0108 0.0398,-0.0242 0.0591,-0.0373 0.0423,-0.0289 0.0858,-0.0569 0.13364,-0.0752 0.0379,-0.0145 0.0779,-0.0225 0.11693,-0.0334 0.0596,-0.0166 0.11736,-0.0399 0.17181,-0.0693 z"
                    />
                    <path
                        seg={'3'}
                        onClick={this.changeColor}
                        style={style_3}
                        d="m 175.53499,34.563892 c -1.99754,1.933418 -3.99093,3.871128 -5.98015,5.813112 -4.32069,4.218097 -8.62176,8.456417 -12.88371,12.733859 -10.54878,10.587124 -20.85686,21.412867 -31.46651,31.938989 -4.55374,4.517894 -9.16343,8.980988 -13.60715,13.607142 -1.40484,1.462516 -2.79663,2.944666 -4.34672,4.252236 -0.49104,0.41421 -0.9978,0.81076 -1.46466,1.25204 -0.12552,0.11864 -0.24812,0.24049 -0.37798,0.35436 -0.0317,0.0278 -0.0648,0.0563 -0.0827,0.0945 -0.0176,0.0374 -0.0187,0.081 -0.0101,0.12136 0.009,0.0404 0.0264,0.0783 0.0455,0.11487 0.0633,0.12107 0.1432,0.23265 0.22442,0.34254 0.55794,0.75492 1.19203,1.44993 1.82938,2.13913 1.89844,2.05285 3.83734,4.06792 5.7892,6.07005 18.42588,18.90038 38.02048,36.66182 55.84598,56.12946 1.29415,1.41337 2.5802,2.83699 3.96875,4.15774 0.54976,0.52292 1.11532,1.02943 1.7009,1.5119 0.25849,0.21297 0.52314,0.42352 0.73232,0.68508 0.0466,0.0582 0.0908,0.11942 0.14846,0.16673 0.0288,0.0237 0.0609,0.0436 0.0959,0.0565 0.035,0.0128 0.073,0.0183 0.10996,0.0131 0.0514,-0.007 0.0982,-0.0348 0.13664,-0.0697 0.0384,-0.0349 0.0693,-0.0772 0.0996,-0.11931 0.11488,-0.15997 0.2251,-0.32387 0.35435,-0.47247 0.23071,-0.26523 0.51651,-0.47553 0.77958,-0.7087 0.17925,-0.15887 0.34835,-0.32876 0.51972,-0.4961 0.42645,-0.41641 0.86755,-0.8175 1.29929,-1.22842 4.5873,-4.36606 8.04967,-9.77289 11.12667,-15.30804 7.47985,-13.45537 12.99075,-28.18625 14.51194,-43.50556 1.99226,-20.063365 -3.00768,-40.510058 -12.56166,-58.264755 -3.73103,-6.933592 -8.19016,-13.552519 -13.89802,-18.976136 -0.31936,-0.303458 -0.64459,-0.605411 -0.90345,-0.961877 -0.32313,-0.444968 -0.54162,-0.972704 -0.94493,-1.346541 -0.10323,-0.09568 -0.2186,-0.181331 -0.29813,-0.29746 -0.0153,-0.02229 -0.0291,-0.0456 -0.0461,-0.06661 -0.017,-0.02101 -0.0375,-0.03991 -0.0625,-0.05032 -0.029,-0.01211 -0.0627,-0.01172 -0.0919,0 -0.0224,0.009 -0.0419,0.02425 -0.0585,0.04176 -0.0165,0.01743 -0.0305,0.03724 -0.0418,0.05847 -0.0175,0.03303 -0.0286,0.0696 -0.0501,0.100227 -0.0159,0.02266 -0.0369,0.04122 -0.0585,0.05846 -0.0266,0.02119 -0.0545,0.04073 -0.0835,0.05847 z"
                        id="path860"
                    />
                    <path
                        seg={'4'}
                        onClick={this.changeColor}
                        style={style_4}
                        d="m 175.86908,176.13322 c -0.60544,-0.5636 -1.20682,-1.13157 -1.80407,-1.70384 -2.7549,-2.63965 -5.42117,-5.36999 -8.0849,-8.10161 -19.41344,-19.90823 -38.73102,-39.92367 -58.89952,-59.06657 -0.39601,-0.37588 -0.793,-0.75209 -1.15276,-1.1628 -0.12461,-0.14226 -0.24493,-0.28884 -0.38176,-0.41937 -0.13684,-0.13054 -0.29198,-0.2456 -0.46869,-0.31296 -0.0755,-0.0288 -0.15545,-0.0487 -0.23623,-0.0472 -0.14721,0.003 -0.2843,0.0764 -0.4016,0.16537 -0.1111,0.0843 -0.20991,0.18349 -0.30711,0.28348 -0.3727,0.38339 -0.72794,0.78379 -1.1103,1.15755 -0.32693,0.31958 -0.67292,0.61893 -1.01581,0.92132 -2.461281,2.17056 -4.771415,4.50553 -7.086505,6.83139 -4.488587,4.50947 -9.00385,8.9923 -13.49711,13.49711 -6.563545,6.58042 -13.080014,13.20759 -19.623606,19.80785 -6.272477,6.32679 -12.569958,12.62894 -18.804316,18.9933 -2.759051,2.81658 -5.507431,5.647 -8.409969,8.31548 -0.356798,0.32803 -0.716612,0.6543 -1.039434,1.01581 -0.08933,0.10003 -0.175726,0.20266 -0.25986,0.3071 -0.03132,0.0389 -0.06243,0.0782 -0.08809,0.12099 -0.02566,0.0428 -0.04585,0.0896 -0.05365,0.13887 -0.01428,0.0904 0.01431,0.18334 0.06121,0.26189 0.04691,0.0786 0.111232,0.14499 0.175022,0.21058 1.786633,1.83702 3.630684,3.6191 5.551524,5.31529 8.335339,7.36049 18.085458,13.05595 28.442708,17.10342 10.901934,4.26033 22.51126,6.71686 34.206842,7.18155 22.82459,0.90687 46.12797,-6.106 63.78348,-20.5997 2.38198,-1.95541 4.65709,-4.0369 6.99257,-6.04762 1.24714,-1.07372 2.51302,-2.12864 3.68526,-3.28367 0.0598,-0.0589 0.11974,-0.1186 0.16537,-0.18899 0.0192,-0.0296 0.0358,-0.0611 0.0472,-0.0945 0.0182,-0.0534 0.0225,-0.11364 0,-0.16536 -0.0158,-0.0363 -0.0434,-0.066 -0.0709,-0.0945 -0.0619,-0.0644 -0.12551,-0.12721 -0.18979,-0.18928 -0.017,-0.0164 -0.034,-0.0328 -0.0501,-0.0501 -0.0284,-0.0307 -0.0537,-0.0643 -0.0752,-0.10023 z"
                    />
                </g>
            </svg>

        );
    }
}

const mapStateToProps = state => {

    return {
        tooth: state.tooth,
    };

};

const mapDispatchToProps = dispatch => {

    return {

        setZoneValues: ( data, index, segment ) => dispatch ( actions.setZoneValues ( data, index, segment ) ),

    };

};

export default connect ( mapStateToProps, mapDispatchToProps ) ( CuttedZone );